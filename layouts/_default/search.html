{{ define "main" }}
<h2>搜索学习资料</h2>

<div id="search-box"></div>
<div id="hits"></div>

<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/satellite-min.css">

<style>
  .ais-Hits-item { border-bottom: 1px solid #ddd; padding-bottom: 10px; margin-bottom: 10px; }
  .ais-Highlight-highlighted { background-color: #fbeeb8; }
</style>

<script>
  const searchClient = algoliasearch(
    'SMA85IWFQN',        // <--- 再次填入你自己的 Application ID
    '8a00c461ba4a78c16cb8862108e7e83a'  // <--- 再次填入你自己的 Search-Only API Key
  );

  const search = instantsearch({
    indexName: 'nuaaguide',
    searchClient,
  });

  search.addWidgets([
    instantsearch.widgets.searchBox({
      container: '#search-box',
      placeholder: '输入课程名、老师或关键词搜索...',
    }),

    instantsearch.widgets.hits({
      container: '#hits',
      templates: {
        item: `
          <article>
            <a href=" > permalink }}">
              <h4>{{</* */>#helpers.highlight}}{ "attribute": "title" }{{</* */>/helpers.highlight}}</h4>
            </a >
            <p>{{</* */>#helpers.highlight}}{ "attribute": "summary" }{{</* */>/helpers.highlight}}</p >
          </article>
        `,
        empty: `没有找到与 "{{</* */> query }}" 相关的资料。`,
      },
    })
  ]);

  search.start();
</script>
{{ end }}


  search.start();
</script>
{{ end }}
