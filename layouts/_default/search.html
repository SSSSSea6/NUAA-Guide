{{ define "main" }}
<div class="content-section">
    <h2>æœç´¢èµ„æ–™</h2>
    
    <div class="search-notice">
        <p>ğŸ” æœç´¢å¯èƒ½è¾ƒæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚å¦‚æœé•¿æ—¶é—´æ²¡æœ‰ç»“æœï¼Œå¯èƒ½æ˜¯æ— ç›¸å…³èµ„æºã€‚</p>
    </div>

    <div id="search-box"></div>
 <div id="search-loading" style="display: none; text-align: center; padding: 20px;">
        <div style="display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        <p style="margin-top: 10px; color: #6c757d;">æœç´¢ä¸­ï¼Œè¯·ç¨å€™...</p>
    </div>

    
    <div id="hits"></div>

    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/satellite-min.css">

    <!-- è®¾ç½® Algolia é…ç½® -->
    <script>
      window.algoliaConfig = {
        appId: 'SMA85IWFQN',
        searchKey: '8a00c461ba4a78c16cb8862108e7e83a',
        indexName: 'nuaaguide'
      };

const search = instantsearch({
        indexName: 'nuaaguide',
        searchClient,
      });

      // æ·»åŠ æœç´¢çŠ¶æ€ç›‘å¬
      search.on('render', function() {
        document.getElementById('search-loading').style.display = 'none';
      });
      
      search.on('search', function() {
        document.getElementById('search-loading').style.display = 'block';
      });

      search.addWidgets([
        instantsearch.widgets.searchBox({
          container: '#search-box',
          placeholder: 'è¾“å…¥è¯¾ç¨‹åã€è€å¸ˆæˆ–å…³é”®è¯æœç´¢...',
        }),

        instantsearch.widgets.hits({
          container: '#hits',
          templates: {
            item: `
              <article>
                <a href="{{permalink}}" style="color: #0056b3; font-weight: bold;">
                  <h4>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</h4>
                </a>
                <p style="color: #6c757d; margin-top: 4px;">{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p>
                {{#file_url}}<small>ä¸‹è½½èµ„æº</small>{{/file_url}}
              </article>
            `,
            empty: `æ²¡æœ‰æ‰¾åˆ°ä¸ "{{query}}" ç›¸å…³çš„èµ„æ–™ã€‚`,
          },
        })
      ]);

      search.start();
    </script>
</div>
{{ end }}
