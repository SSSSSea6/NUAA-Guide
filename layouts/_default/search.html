{{ define "main" }}
<div class="content-section">
    <h2>搜索资料</h2>
    
    <div class="search-notice">
        <p>🔍 搜索可能加载较慢，请耐心等待。如果长时间没有结果，可能是尚未上传相关资源。</p>
    </div>

    <div id="search-box"></div>
 <div id="search-loading" style="display: none; text-align: center; padding: 20px;">
        <div style="display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        <p style="margin-top: 10px; color: #6c757d;">搜索中，请稍候...</p>
    </div>

    
    <div id="hits"></div>

    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/satellite-min.css">

    <!-- 设置 Algolia 配置 -->
    <script>
      window.algoliaConfig = {
        appId: 'SMA85IWFQN',
        searchKey: '8a00c461ba4a78c16cb8862108e7e83a',
        indexName: 'nuaaguide'
      };
search.addWidgets([
    // 其他组件...
    
    instantsearch.widgets.infiniteHits({
      container: '#hits',
      templates: {
        item: `
          <article>
            <a href="{{permalink}}" style="color: #0056b3; font-weight: bold;">
              <h4>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</h4>
            </a>
            <p style="color: #6c757d; margin-top: 4px;">{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p>
            {{#file_url}}<small>下载资源</small>{{/file_url}}
          </article>
        `,
        empty: `没有找到与 "{{query}}" 相关的资料。`,
        loadMore: `
          <button class="load-more-btn">加载更多</button>
        `
      },
    })
  ]);
        
    </script>
    
    <!-- 加载搜索脚本 -->
    <script src="/js/algolia-search.js"></script>
</div>
{{ end }}
